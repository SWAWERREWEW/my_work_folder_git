def task21():
    """
Задача 21. Привидение Ваня
Ограничение по времени: 2 секунды.
Ограничение по памяти: 64 мегабайта
Привидение Ваня любит играть со своими плитками. Он любит выкладывать их в
ряд и разглядывать свое творение. Однако недавно друзья решили подшутить над Ваней и
поставили в его игровой комнате зеркало. Ведь всем известно, что привидения не
отражаются в зеркале! А плитки отражаются. Теперь Ваня видит перед собой N цветных
плиток, но не знает, какие из этих плиток настоящие, а какие — всего лишь отражение в
зеркале. Помогите Ване! Выясните, сколько плиток может быть у Вани. Ваня видит
отражение всех плиток в зеркале и часть плиток, которая находится перед ним. Часть
плиток может быть позади Вани, их он не видит.
Описание входных данных
Первая строка входного файла содержит число N (1⩽ N ⩽106) и количество
различных цветов, в которые могут быть раскрашены плитки — M (1⩽M⩽106). Следующая
строка содержит N целых чисел от 1 до M — цвета плиток
Описание выходных данных
Выведите в выходной файл все такие K, что у Вани может быть K плиток в порядке
убывания.
    """

    def find_possible_tiles(n, m, colors):
        def is_symmetric(left_part, right_part):
            return left_part == list(reversed(right_part))

        # Возможные значения К
        possible_ks = []

        for k in range((n + 1) // 2, n + 1):
            if len(colors[:k]) != len(colors[n - k:n]):
                continue

            # Проверяем, совпадает ли первая половина с перевёрнутой последней половиной
            if is_symmetric(colors[:k], colors[n - k:n]):
                possible_ks.append(k)

        # Сортируем найденные K по убыванию
        possible_ks.sort(reverse=True)
        return possible_ks

    # Чтение ввода
    input_data = input().strip()
    n, m = map(int, input_data.split())
    colors = list(map(int, input()))

    result = find_possible_tiles(n, m, colors)
    print(" ".join(map(str, result)))

if __name__ == '__main__': task21()