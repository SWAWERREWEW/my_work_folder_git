from time import time


def time_of_function(funcion_for_check):
    def wrapper():
        start_time = time()
        result = funcion_for_check()
        end_time = round(time() - start_time, 6)
        print(f"–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è {end_time} —Å–µ–∫—É–Ω–¥")
        return result
    return wrapper


@time_of_function
def task22():
    """
–ó–∞–¥–∞—á–∞ 22. Packed Prefix
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏: 0.5 —Å.
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –ø–∞–º—è—Ç–∏: 64 Mb.
–í–∞–º –¥–∞–Ω—ã —Å—Ç—Ä–æ–∫–∏ –≤ –∑–∞–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ. –û–ø—Ä–µ–¥–µ–ª–∏–º –∑–∞–ø–∞–∫–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É (–ó–°)
—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ. –°—Ç—Ä–æ–∫–∞, —Å–æ—Å—Ç–æ—è—â–∞—è —Ç–æ–ª—å–∫–æ –∏–∑ —Å—Ç—Ä–æ—á–Ω—ã—Ö –±—É–∫–≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞, —è–≤–ª—è–µ—Ç—Å—è
–ó–°. –ï—Å–ª–∏ –ê –∏ –í - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ó–°, —Ç–æ –∏ AB —è–≤–ª—è–µ—Ç—Å—è –ó–°. –ï—Å–ª–∏ –ê ‚Äì –ó–°, –∞ n ‚Äì –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–µ
–Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ, —Ç–æ n[A] —Ç–æ–∂–µ –ó–°. –ü—Ä–∏ —ç—Ç–æ–º –Ω–∞–¥–ø–∏—Å—å n[A] –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–µ
—Å—Ç—Ä–æ–∫–∞ –ê –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥—Ä—è–¥ n —Ä–∞–∑. –ù–∞–π–¥–∏—Ç–µ –Ω–∞–∏–±–æ–ª—å—à–∏–π –æ–±—â–∏–π –ø—Ä–µ—Ñ–∏–∫—Å —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã—Ö
—Å—Ç—Ä–æ–∫ –∏ –≤—ã–≤–µ–¥–∏—Ç–µ –µ–≥–æ (–≤ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ).
–ò–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –ø—É—Å—Ç—å —Å–ª–æ–∂–µ–Ω–∏–µ ‚Äì —ç—Ç–æ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è –¥–≤—É—Ö —Å—Ç—Ä–æ–∫, –∞ —É–º–Ω–æ–∂–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏
–Ω–∞ —á–∏—Å–ª–æ ‚Äì –ø–æ–≤—Ç–æ—Ä —Å—Ç—Ä–æ–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —á–∏—Å–ª–æ —Ä–∞–∑. –ü—É—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è f —É–º–µ–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ó–°
–∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å –µ—ë. –ï—Å–ª–∏ –ó–° D –∏–º–µ–µ—Ç –≤–∏–¥ D = AB, –≥–¥–µ A –∏ –í —Ç–æ–∂–µ –ó–°, —Ç–æ f(D) = f(A) +
f(B). –ï—Å–ª–∏ D = n[A], —Ç–æ f(D) = f(A) √ó n.
–§–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞
–í –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ –∑–∞–ø–∏—Å–∞–Ω–æ —á–∏—Å–ª–æ ùëõ (1 ‚â§ n ‚â§ 1000) ‚Äì —á–∏—Å–ª–æ —Å—Ç—Ä–æ–∫. –î–∞–ª–µ–µ –≤ n —Å—Ç—Ä–æ–∫–∞—Ö
–∑–∞–ø–∏—Å–∞–Ω—ã –∑–∞–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã, —Ç–æ –µ—Å—Ç—å
—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–º—É —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–º—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é. –î–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫ –ø–æ—Å–ª–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ –Ω–µ
–ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç 105.

–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞
–í—ã–≤–µ–¥–∏—Ç–µ –Ω–∞–∏–±–æ–ª—å—à–∏–π –æ–±—â–∏–π –ø—Ä–µ—Ñ–∏–∫—Å —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫.

–ü—Ä–∏–º–µ—Ä—ã
–í–≤–æ–¥
3
2[a]2[ab]
3[a]2[r2[t]]
a2[aa3[b]]
–í—ã–≤–æ–¥
aaa

–í–≤–æ–¥
3
abacabaca
2[abac]a
3[aba]
–í—ã–≤–æ–¥
aba

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è
–°–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è, –∫–∞–∫ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è –¥–≤—É—Ö —Å—Ç—Ä–æ–∫. –£–º–Ω–æ–∂–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –Ω–∞
—á–∏—Å–ª–æ ‚Äì –ø–æ–≤—Ç–æ—Ä —Å—Ç—Ä–æ–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —á–∏—Å–ª–æ —Ä–∞–∑. –ü—É—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è f —É–º–µ–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ó–° –∏
—Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å –µ—ë. –ï—Å–ª–∏ –ó–° D –∏–º–µ–µ—Ç –≤–∏–¥ D = AB, –≥–¥–µ A –∏ B —Ç–æ–∂–µ –ó–°, —Ç–æ f(D) = f(A) + f(B).
–ï—Å–ª–∏ D = n[A], —Ç–æ f(D) = f(A) √ó n.
    """
    def minimum(a, b): return a if a <= b else b

    def custom_isdigit(char): return '0' <= char <= '9'

    def length(l):
        n = 0
        for _ in l: n += 1
        return n

    def unpack(s):
        result = []
        i = 0
        while i < len(s):
            if custom_isdigit(s[i]):
                count = int(s[i])
                i += 1

                start = i + 1
                end = s.find(']', start)
                inner_string = s[start:end]

                for _ in range(count):
                    result.append(unpack(inner_string))

                i = end + 1
            else:
                result.append(s[i])
                i += 1

        return ''.join(result)

    def longest_prefix(strings):
        if not strings: return ""

        prefix = list(strings[0])
        for string in strings[1:]:

            min_len = minimum(length(prefix), length(string))

            for j in range(min_len):
                if prefix[j] != string[j]: break
            else: j += 1

            prefix = prefix[:j]

        return ''.join(prefix)

    n = int(input())
    packed_strings = [input() for _ in range(n)]

    unpacked_strings = [unpack(ps) for ps in packed_strings]

    common_prefix = longest_prefix(unpacked_strings)
    print(common_prefix)

if __name__ == '__main__': task22()